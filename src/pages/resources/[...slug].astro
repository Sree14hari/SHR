---
import { getCollection } from "astro:content";
import type { AstroSeoProps } from "@astrolib/seo";
import MarkdownPostLayout from "../../layouts/MarkdownPostLayout.astro";

export async function getStaticPaths() {
	const resourceEntries = await getCollection("resources");



	return resourceEntries

		.map((entry) => {

			const [lang, ...slug] = entry.slug.split("/");

			return { params: { lang, slug: slug.join("/") || undefined }, props: entry };

		})

		.filter((entry) => entry.params.lang === "en");
}

const entry = Astro.props;
const { Content } = await entry.render();

const seo: AstroSeoProps = {
	title: entry.data.title,
	description: entry.data.description,
	canonical: `https://sree14hari.work/resources/${entry.slug}/`,
	openGraph: {
		url: entry.slug,
		title: entry.data.title,
		description: "{frontmatter.description}",
		// images: [
		// 	{
		// 		url: "https://mintaka.co/opengraph/social-og.jpg",
		// 		width: 1200,
		// 		height: 630,
		// 		alt: "Social open graph",
		// 		type: "image/jpeg",
		// 	},
		// 	{
		// 		url: "https://mintaka.co/opengraph/twitter-og.jpg",
		// 		width: 4096,
		// 		height: 4096,
		// 		alt: "Twitter open graph",
		// 		type: "image/jpeg",
		// 	},
		// 	{ url: "https://mintaka.co/opengraph/social-og.jpg" },
		// 	{ url: "https://mintaka.co/opengraph/twitter-og.jpg" },
		// ],
		site_name: "SHR",
	},
	// twitter: {
	// 	handle: "@TwitterHandle",
	// 	site: "@site",
	// 	cardType: "summary_large_image",
	// },
};
---

<MarkdownPostLayout frontmatter={entry.data} body={entry.body ?? ""} seo={seo}>
	<Content />
</MarkdownPostLayout>
