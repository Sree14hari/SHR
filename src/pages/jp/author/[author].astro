---
import { getCollection } from "astro:content";
import type { AstroSeoProps } from "@astrolib/seo";
import AuthorComponent from "@components/blog/Author.astro";
import BaseLayout from "@layouts/BaseLayout.astro";

export async function getStaticPaths() {
  const authors = await getCollection("authors");

  return authors
    .map((entry) => {
      const [lang, ...slug] = entry.slug.split("/");
      return {
        params: { lang, author: slug.join("/") || undefined },
        props: { authorEntry: entry },
      };
    })
    .filter((entry) => entry.params.lang === "en");
}

const { authorEntry } = Astro.props;

const seo: AstroSeoProps = {
  title: authorEntry.data.name,
  description: authorEntry.data.description,
  canonical: `https://sree14hari.work/jp/author/${authorEntry.slug}/`,
};
---

<BaseLayout seo={seo}>
  <AuthorComponent author={authorEntry} />
</BaseLayout>
